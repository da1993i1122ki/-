
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>è‹±å˜èªã‚¯ã‚¤ã‚º</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background-color: #f9fafb; }
    input, select, button { margin-top: 10px; font-size: 1rem; padding: 5px; }
    .question { margin: 10px 0; }
  </style>
</head>
<body>
  <h1>è‹±å˜èªã‚¯ã‚¤ã‚º</h1>

  <label for="gradeSelect">å­¦å¹´ã‚’é¸æŠï¼š</label>
  <select id="gradeSelect" onchange="updateUnitOptions()">
    <option value="">å­¦å¹´ã‚’é¸ã‚“ã§ãã ã•ã„</option>
    <option value="1å¹´">1å¹´</option>
    <option value="2å¹´">2å¹´</option>
    <option value="3å¹´">3å¹´</option>
  </select><br>

  <label for="unitSelect">ãƒ¦ãƒ‹ãƒƒãƒˆã‚’é¸æŠï¼š</label>
  <select id="unitSelect"></select><br>

  <button onclick="generateQuiz()">å‡ºé¡Œã™ã‚‹</button>

  <form id="quizForm" onsubmit="gradeQuiz(event)"></form>
  <div id="result" style="margin-top: 20px; font-size: 1.2rem; font-weight: bold;"></div>

  <script>
    const unitOptions = {
      "1å¹´": ["Unit0","Unit1","Unit2","Unit3","Unit4","Stage Activity 1","Unit5","Unit6","Unit7","Unit8","Stage Activity 2","Unit9","Unit10","Stage Activity 3","Let's Read"],
      "2å¹´": ["Unit 0","Unit 1","Unit 2","Unit 3","Stage Activity 1","Let's Read 1","Unit 4","Unit 5","Unit 6","Stage Activity 2","Let's Read 2","Unit 7","Stage Activity 3","Let's Read 3"],
      "3å¹´": ["Unit 1","Unit 2","Unit 3","Stage Activity 1","Let's Read 1","Unit 4","Unit 5","Stage Activity 2","Unit 6","Stage Activity 3","Let's Read 2","Let's Read 3"]
    };

    const words = [
      { grade: "1å¹´", unit: "Unit1", english: "apple", japanese: "ã‚Šã‚“ã”", strict: false },
      { grade: "1å¹´", unit: "Unit1", english: "book", japanese: "æœ¬", strict: false },
      { grade: "1å¹´", unit: "Unit2", english: "cat", japanese: "çŒ«", strict: false },
      { grade: "1å¹´", unit: "Unit2", english: "dog", japanese: "çŠ¬", strict: false },

      { grade: "2å¹´", unit: "Unit1", english: "travel", japanese: "æ—…è¡Œ", strict: false },
      { grade: "2å¹´", unit: "Unit1", english: "mountain", japanese: "å±±", strict: false },
      { grade: "2å¹´", unit: "Unit2", english: "river", japanese: "å·", strict: false },
      { grade: "2å¹´", unit: "Unit2", english: "bridge", japanese: "æ©‹", strict: false },

      { grade: "3å¹´", unit: "Unit1", english: "America", japanese: "ã‚¢ãƒ¡ãƒªã‚«", strict: true },
      { grade: "3å¹´", unit: "Unit1", english: "April", japanese: "4æœˆ", strict: true },
      { grade: "3å¹´", unit: "Unit2", english: "challenge", japanese: "æŒ‘æˆ¦", strict: false },
      { grade: "3å¹´", unit: "Unit2", english: "success", japanese: "æˆåŠŸ", strict: false },
      { grade: "3å¹´", unit: "Unit3", english: "inspire", japanese: "åˆºæ¿€ã™ã‚‹", strict: false },
      { grade: "3å¹´", unit: "Unit3", english: "achieve", japanese: "é”æˆã™ã‚‹", strict: false }
    ];

    let currentQuestions = [];

    function updateUnitOptions() {
      const grade = document.getElementById('gradeSelect').value;
      const unitSelect = document.getElementById('unitSelect');
      unitSelect.innerHTML = '<option value="">ãƒ¦ãƒ‹ãƒƒãƒˆã‚’é¸ã‚“ã§ãã ã•ã„</option>';
      if (!grade) return;

      unitOptions[grade].forEach(unit => {
        const option = document.createElement('option');
        option.value = unit;
        option.textContent = unit;
        unitSelect.appendChild(option);
      });
    }

    function generateQuiz() {
      const grade = document.getElementById('gradeSelect').value;
      const unit = document.getElementById('unitSelect').value;
      if (!grade || !unit) return alert('å­¦å¹´ã¨ãƒ¦ãƒ‹ãƒƒãƒˆã‚’é¸ã‚“ã§ãã ã•ã„');

      const filtered = words.filter(w => w.grade === grade && w.unit === unit);
      currentQuestions = filtered.sort(() => 0.5 - Math.random()).slice(0, 10);

      const form = document.getElementById('quizForm');
      form.innerHTML = currentQuestions.map((q, i) =>
        `<div class="question">
          ${i + 1}. ${q.japanese}ï¼š
          <input type="text" name="q${i}" />
        </div>`
      ).join('') + '<br><button type="submit">çµæœã‚’è¡¨ç¤º</button>';

      document.getElementById('result').innerHTML = '';
    }

    function gradeQuiz(event) {
      event.preventDefault();
      const form = document.getElementById('quizForm');
      let score = 0;

      currentQuestions.forEach((q, i) => {
        const userAnswer = form[`q${i}`].value.trim();
        const correctAnswer = q.english.trim();

        const isCorrect = q.strict
          ? userAnswer === correctAnswer
          : userAnswer.toLowerCase() === correctAnswer.toLowerCase();

        if (isCorrect) score++;
      });

      const resultDiv = document.getElementById('result');
      resultDiv.textContent = `ã‚¹ã‚³ã‚¢: ${score} / 10
` + (score === 10 ? 'ğŸ‰ Conglaturation!' : 'ğŸ’ª Fight!');
    }
  </script>
</body>
</html>
